# webpack-papa-script

[![Build Status](https://travis-ci.org/nonjene/webpack-papa-script.svg?branch=master)](https://travis-ci.org/nonjene/webpack-papa-script)
[![Coverage Status](https://coveralls.io/repos/github/nonjene/webpack-papa-script/badge.svg?branch=master)](https://coveralls.io/github/nonjene/webpack-papa-script?branch=master)
[![npm](https://img.shields.io/npm/v/webpack-papa-script.svg)](https://www.npmjs.com/package/webpack-papa-script)

webpack-papa-script æ˜¯ä¸€ä¸ªå¸®åŠ©å‰ç«¯å¼€å‘æ›´è½»æ˜“åœ°æ‰§è¡Œä»å¼€å‘åˆ°éƒ¨ç½²çš„å·¥ç¨‹åŒ–å·¥å…·ã€‚

å®ƒæ˜¯ä¸€ä¸ªå‰ç«¯å¤šé¡µé¢ã€å¤šä¸ªé¡¹ç›®é›†æˆçš„è§£å†³æ–¹æ¡ˆ, æ–¹ä¾¿éƒ¨ç½²å¤§é‡çŸ­æœŸæ€§çš„é¡µé¢, ä¾‹å¦‚å¤§é‡çš„æ´»åŠ¨æ¨å¹¿ä¸“é¢˜ã€‚æ–¹ä¾¿é›†æˆå…±ç”¨ç»„ä»¶, å¿«é€Ÿéƒ¨ç½², å…å»é¢‘ç¹æ‰§è¡Œä¾èµ–åŒ…çš„å®‰è£…ã€‚

## ç‰¹ç‚¹

- åŸºäº webpack v3, è´´ç´§webpackçš„ç”Ÿæ€
- èœ‚å·¢å¼çš„å¤§é¡¹ç›®ï¼Œå¯ä»»æ„åˆ›å»ºå°é¡¹ç›®
- å¯å•ç‹¬æˆ–æ‰¹é‡ç¼–è¯‘å°é¡¹ç›®ï¼Œæ— éœ€æ•´ä¸ªèœ‚å·¢é¡¹ç›®è¿›è¡Œç¼–è¯‘
- æ‰¹é‡ç¼–è¯‘æ—¶ï¼Œè‡ªåŠ¨è¯†åˆ«æ‰€æœ‰é¡¹ç›®
- è‡ªåŠ¨è¯†åˆ«é¡µé¢å…¥å£
- ç›¸äº’ç‹¬ç«‹çš„å°é¡¹ç›®å¯å…±ç”¨ç»„ä»¶ä»£ç 
- å°é¡¹ç›®å¯æ³¨å…¥é webpack çš„å…¬å…±ä»£ç åŒ…çš„å¼•ç”¨, å…¬å…±åŒ…æ›´æ–°å³å¯¹æ•´ä¸ªèœ‚å·¢é¡¹ç›®èµ·æ•ˆ
- ä¾¿æ·çš„ä¸šåŠ¡ç¯å¢ƒåˆ‡æ¢
- çµæ´»çš„é¡¹ç›®éƒ¨ç½²é…ç½®
- çµæ´»çš„å¼€å‘ç¯å¢ƒ
- å¿«é€Ÿéƒ¨ç½²
  - å¯é€šè¿‡æ¨¡ç‰ˆåˆ›å»ºå°é¡¹ç›®
  - é›†æˆäº†è‡ªåŠ¨ä¸Šä¼  ftp

## å¦‚ä½•ä½¿ç”¨

### åˆ›å»ºä¸€ä¸ªé¡¹ç›®

å®‰è£…ä¸€ä¸ªå·¥å…·åŒ…
```shell
npm i create-webpack-papa -g
```

åˆ›å»ºä¸€ä¸ªå‘½åä¸º "proj-hive" çš„ç«™ç‚¹é¡¹ç›®
```shell
create-webpack-papa create proj-hive
```

ç­‰å¾…ä¾èµ–æ–‡ä»¶è‡ªåŠ¨å®‰è£…å®Œæˆå, è¿›å…¥é¡¹ç›®, å³å¯ä½¿ç”¨ webpack-papa-script çš„å„ç§åŠŸèƒ½ã€‚
```shell
cd proj-hive
```

### å¼€å‘ä¸€ä¸ªå°é¡¹ç›®

åˆ›å»ºä¸€ä¸ªå‘½åä¸º "my-proj1" å•é¡µåˆå§‹å°é¡¹ç›®
```shell
npm run create my-proj1
```

å¯¹ my-proj1 è¿›è¡Œæœ¬åœ°å¼€å‘
```shell
npm run watch my-proj1
```

éƒ¨ç½²ä¸Šçº¿ä»£ç , å‡å¦‚åœ¨`papa.config.js`å®šä¹‰çº¿ä¸Šä¸º`pro`
```shell
npm run build my-proj1 pro
```

å…¶ä»–åŠŸèƒ½å‚è€ƒè¯¦ç»†çš„[cliå‘½ä»¤](#cliå‘½ä»¤)


## åŠŸèƒ½ä»‹ç»

### cliå‘½ä»¤

é€šç”¨åœ°, å‘½ä»¤é‡‡ç”¨`npm run foo`æ¨¡å¼, fooä»£è¡¨å…·ä½“çš„å‘½ä»¤åç§°, åé¢å¯æ¥å…¶ä»–å‚æ•°ã€‚ä¸€äº›å‚æ•°å†…å®¹æ˜¯ä¸`papa.config.js`çš„é…ç½®å¯¹åº”çš„ã€‚

åŠŸèƒ½ | å‘½ä»¤&nbsp; &nbsp; &nbsp; &nbsp;  | ä¾‹å­&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; | è¯´æ˜
----|--|------------ | ---
åˆ›å»ºæ–°å°é¡¹ç›® | create | `npm run create foo` | åˆ›å»ºä¸€ä¸ªfooå°é¡¹ç›®ã€‚æ”¯æŒå±‚çº§çš„ç›®å½•ï¼šå‡å¦‚æ˜¯`src/2018/abc`, åˆ™æŠŠ`foo`æ¢ä¸º`2018/abc`
åˆ›å»ºå°é¡¹ç›®æ—¶, é€‰ç”¨ç‰¹å®šçš„æ¨¡ç‰ˆ | t | `npm run create foo t min` | æ¨¡ç‰ˆä½¿ç”¨`src/_template_min` (é»˜è®¤æ¨¡ç‰ˆæ˜¯`_template_def`)
å¼€å¯æœ¬åœ°å¼€å‘ | watch | `npm run watch path/to/foo` | `path/to/foo` ä»£è¡¨`src/`ä¸‹çš„æ–‡ä»¶å¤¹
ç”Ÿæˆéƒ¨ç½²ä»£ç  | build | `npm run build path/to/foo`æˆ–`npm run build path/to/foo,path/to/bar` | ç¼–è¯‘ç›®å½•`path/to/foo`çš„ä»£ç ; å¯ä»¥æŒ‡å®šå¤šä¸ªä½ç½®, ä»¥`,`é—´éš”ã€‚é»˜è®¤æ˜¯éƒ¨ç½²`config.productEnvType`æŒ‡å®šçš„æ¨¡å¼ç¼–è¯‘; å…·ä½“çš„ç¼–è¯‘æ•ˆæœè¯·çœ‹[å…·ä½“ä»‹ç»](#buildçš„ä»‹ç»)ã€‚
æ‰¹é‡ç”Ÿæˆéƒ¨ç½²ä»£ç    | build-all | `npm run build-all` | è‡ªåŠ¨æŸ¥æ‰¾`src/`ä¸‹çš„æ‰€æœ‰çš„é¡¹ç›®, ä¾æ¬¡è‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰ã€‚
è®¾ç½®æ‰¹é‡ç”Ÿæˆçš„èŒƒå›´ | scope | `npm run build-all scope path/to/foo` | è‡ªåŠ¨æŸ¥æ‰¾`src/path/to/foo`ä¸‹çš„æ‰€æœ‰çš„é¡¹ç›®, ä¾æ¬¡è‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰ï¼›åŒ`build`å‘½ä»¤, `scope`çš„å€¼ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ª, ä»¥`,`é—´éš”ã€‚
é€‰æ‹©éƒ¨ç½²æ–¹å¼ | keyå€¼ | `npm run build foo test` | `pro`æ˜¯`config.deployEnvType`ä¸­å®šä¹‰çš„keyå€¼, é»˜è®¤æ˜¯`test\|pre\|pro`.
ä¸Šä¼ ä»£ç åˆ°ftp | u | `npm run build foo test u`æˆ–`npm start u foo` | `foo`åœ¨testæ¨¡å¼ç¼–è¯‘å, ç«‹å³ä¸Šä¼ ; æˆ–æŒ‡å®šä¸Šä¼ çš„é¡¹ç›®ã€‚(ä¸Šä¼ ç›®å½•åœ¨`config.localAssetPath`è®¾å®šã€‚)
ç”Ÿæˆå…¬å…±èµ„æº | deploy-static | `npm run deploy-static` | æŠŠ`./resource/js`æ‰“åŒ…ğŸ“¦, ç”Ÿæˆè„±ç¦»webpackçš„å…¬å…±ä»£ç åŒ…åˆ°`./resource/bundle`, å¹¶æŠŠ`./resource/bundle`çš„æ‰€æœ‰èµ„æºåˆ†å‘åˆ°`config.deployEnvType`é…ç½®çš„ç›®å½•ä¸Š(watchå‘½ä»¤ä¹Ÿä¼šè‡ªåŠ¨æ‰§è¡Œèµ„æºåˆ†å‘)
è®¾ç½®å‰ç«¯ä»£ç çš„æ¨¡å¼ | mode | `npm run watch foo mode pro` | æŠŠæœ¬åœ°å¼€å‘çš„ä»£ç çš„ç¯å¢ƒåˆ‡æ¢ä¸ºproçš„ç¯å¢ƒã€‚ä¸ºäº†é¿å…è¯¯æ“ä½œ, åªæœ‰åœ¨`config.developEnvType`è®¾ç½®çš„ç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨`mode`(`watch`å³ä¸ºè¯¥ç¯å¢ƒ)ã€‚å‡å¦‚ç¡®å®éœ€è¦åœ¨å…¶ä»–ç¯å¢ƒåˆ‡æ¢, å¯ä»¥æŠŠ`mode`æ¢ä¸º`hard-mode`
å¼ºåˆ¶ç¼–è¯‘ç¯å¢ƒä¸ºproduction | p | `npm run watch foo p` | ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨, æŸäº›æƒ…å†µä¸ºäº†è°ƒè¯•æˆ–æµ‹è¯•å¯ç”¨ã€‚æ­¤ä¾‹å­å¯æŠŠæœ¬åœ°å¼€å‘çš„ç¼–è¯‘æ•ˆæœæ”¹ä¸ºåƒbuildé‚£æ ·
å¼ºåˆ¶ç¼–è¯‘ç¯å¢ƒä¸ºdevelopment | d | `npm run build foo d` | ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨, æŸäº›æƒ…å†µä¸ºäº†è°ƒè¯•æˆ–æµ‹è¯•å¯ç”¨ã€‚æ•ˆæœä¸`p`ç›¸åã€‚

### buildçš„ä»‹ç»

webpack-papa-script æœ‰éå¸¸çµæ´»çš„ç¼–è¯‘åŠŸèƒ½, buildçš„æ“ä½œå¯ä»¥é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæˆ–ä¸€ä¸ªèŒƒå›´å†…çš„æ‰€æœ‰é¡¹ç›®, è¯¦è§[ä½¿ç”¨buildå‘½ä»¤](#ä½¿ç”¨buildå‘½ä»¤)ã€‚

æ­¤å¤–æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸‹çš„`papa.config.js`è‡ªå®šä¹‰buildçš„å„é¡¹é…ç½®, å¦‚: 
- [å„ç§ç¼–è¯‘æ¨¡å¼çš„å®šä¹‰](#ç¼–è¯‘æ¨¡å¼çš„å®šä¹‰)
- [ç¼–è¯‘ä»£ç çš„è¾“å‡ºç›®å½•](#ç¼–è¯‘è¾“å‡º)
- [å®šä¹‰å¦‚ä½•è¯†åˆ«é¡¹ç›®](#å®šä¹‰å¦‚ä½•è¯†åˆ«é¡¹ç›®)(çº¦å®šä¼˜å…ˆ, ä¸å†éœ€è¦æ‰‹å·¥é…ç½®å…¥å£, åªè¦ç›®å½•æŒ‰ç…§è¿™ä¸€ä¸ªå‚è€ƒç³»æ•°çš„è§„åˆ™åˆ›å»º, å³è‡ªåŠ¨è¯†åˆ«ä¸ºä¸€ä¸ªé¡¹ç›®)

#### ä½¿ç”¨buildå‘½ä»¤

å…ˆå‡è®¾ä¸€ä¸ªpapaé¡¹ç›®ä¸Šæœ‰ä»¥ä¸‹è¿™æ ·çš„ç›®å½•ç»“æ„, å®ƒå«æœ‰ä¸‰ä¸ªå°é¡¹ç›®`foo`,`bar/baz`,`bar/qux`ï¼š
```shell
  |-build
  |-dist
  |-node_modules
  |-resource
  |-src
  |---foo
  |-----index.js
  |-----index.html
  |---bar
  |-----baz
  |-------index.js
  |-------index.html
  |-----qux
  |-------index.js
  |-------index.html
```

`npm run build` åé¢æ¥éœ€è¦buildçš„ç›®æ ‡å³å¯, ç›®æ ‡æ˜¯ä¸€ä¸ªåŸºäºé¡¹ç›®ç›®å½•`src`ä¸‹çš„å­ç›®å½•, å¦‚ï¼š

  - `npm run build foo` ä»£è¡¨ç¼–è¯‘`src/foo`è¿™ä¸ªé¡¹ç›®, 

  - `npm run build bar/baz` ä»£è¡¨`src/bar/baz`è¿™ä¸ªé¡¹ç›®ã€‚

ç›®æ ‡å¯ä»¥è®¾ç½®ä¸ºå¤šä¸ª, ä¸€ä¸ªå‘½ä»¤buildå¤šä¸ªé¡¹ç›®ã€‚ç”¨`,`éš”å¼€ï¼š
 
  -  `npm run build foo,bar/baz` åŒä¸Šé¢ä¸¤æ¡å‘½ä»¤åˆ†åˆ«æ‰§è¡Œçš„æ•ˆæœã€‚

ç›®æ ‡å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªèŒƒå›´å†…çš„æ‰€æœ‰å°é¡¹ç›®, å¦‚ï¼š

  - `npm run build-all` ä»£è¡¨ç¼–è¯‘`src`ä¸‹çš„æ‰€æœ‰é¡¹ç›®ã€‚
  - `npm run build-all scope bar` ä»£è¡¨ç¼–è¯‘`src/bar`ä¸‹çš„æ‰€æœ‰é¡¹ç›®, æŒ‰ç…§ä»¥ä¸Šçš„ä¾‹å­, åˆ™æ˜¯`bar/baz`å’Œ`bar/qux`ã€‚

åŒæ ·, æŒ‡å®šçš„èŒƒå›´ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ª, ç”¨`,`éš”å¼€ã€‚(æ³¨æ„ä¾‹å­ä¸­çš„`foo`æœ¬èº«æ˜¯ä¸€ä¸ªé¡¹ç›®, ç”¨`scope`æ˜¯ä¸èƒ½è¯†åˆ«çš„)


#### ç¼–è¯‘æ¨¡å¼çš„å®šä¹‰

ç¼–è¯‘æ¨¡å¼åˆ†äº†ä¸¤ä¸ªæ¦‚å¿µ, ä¸€ä¸ªæ˜¯**å‰ç«¯ç¯å¢ƒ**, ä¸€ä¸ªæ˜¯**ç¼–è¯‘æ¨¡å¼**ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`papa.config.js`å®šä¹‰è¿™äº›é…ç½®, ç„¶ååœ¨å‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨é…ç½®é‡Œæ‰€å®šä¹‰çš„åç§°ã€‚

##### å‰ç«¯ç¯å¢ƒ
æˆ‘ä»¬ä¸Šçº¿ä¸€ä¸ªé¡¹ç›®å‰é€šå¸¸éœ€è¦ç»è¿‡å‡ ä¸ªè¿‡ç¨‹, å¦‚æœ¬åœ°å¼€å‘ç¯å¢ƒ, æµ‹è¯•ç¯å¢ƒ, é¢„å‘å¸ƒç¯å¢ƒç­‰ã€‚æˆ‘ä»¬é€šè¿‡`papa.config.js`å®šä¹‰è¿™äº›å‰ç«¯ç¯å¢ƒ, å¹¶ä¸”å°†è¿™äº›ç¯å¢ƒå˜é‡æ³¨å…¥åˆ°å‰ç«¯ä»£ç é‡Œã€‚ç›¸å…³çš„å±æ€§ä¾‹å­å¦‚ä¸‹ï¼š

`deployEnvType` keyå€¼å®šä¹‰æœ‰å“ªäº›ç¯å¢ƒ, å€¼ä¸ºç¼–è¯‘çš„è¾“å‡ºç›®å½•ã€‚å¦‚ä»¥ä¸‹å®šä¹‰äº† `test|pre|pro` 3ä¸ªã€‚
```js
  deployEnvType:{
      test: 'build/activity',
      pre: 'dist/pre',
      pro: 'dist/pro'
  }
```
`deployEnvMapFetch` å¯ä»¥å®šä¹‰ç¯å¢ƒå¯¹åº”çš„å‰ç«¯ç¯å¢ƒå˜é‡, è¯¥å€¼ä¼šæ³¨å…¥ç¼–è¯‘åçš„ä»£ç é‡Œã€‚
```js
  deployEnvMapFetch: {
      test: 'test',
      pre: 'pre',
      pro: 'produce'
  },
```
`frontendConfCode` å°±æ˜¯æ³¨å…¥çš„jsä»£ç æ¨¡ç‰ˆ, å®ƒæ¥æ”¶ä¸¤ä¸ªå˜é‡, å…¶ä¸­ä¸€ä¸ªæ˜¯`mode`å³ä¸ºå‰ç«¯ç¯å¢ƒå˜é‡ã€‚è¯¦ç»†ä¾‹å­å‚è€ƒ[ä½¿ç”¨æ–¹æ³•](#å¦‚ä½•ä½¿ç”¨)ç”Ÿæˆçš„`papa.config.js` ä¾‹å­ã€‚

æœ‰äº†è¿™äº›é…ç½®å, æˆ‘ä»¬å°±å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæˆ‘ä»¬è¦ä½¿ç”¨å“ªä¸€ä¸ªç¯å¢ƒï¼š

`npm run build foo [test|pre|pro]`

å‡å¦‚æˆ‘ä»¬ä¸æŒ‡å®šç¯å¢ƒçš„è¯, å®ƒä¼šè‡ªåŠ¨é€‰å– papa.config.js çš„`productEnvType`å®šä¹‰çš„ç¯å¢ƒã€‚


##### ç¼–è¯‘æ¨¡å¼
å›ºå®šäº†ä¸¤ç§ï¼šå¼€å‘æ¨¡å¼å’Œå‘å¸ƒæ¨¡å¼
æˆ‘ä»¬å¯ä»¥ç”¨`developEnvType`å®šä¹‰ä¸Šæ–‡ä¸­`deployEnvType`é‡Œçš„å“ªä¸ªå‰ç«¯ç¯å¢ƒä¸ºå¼€å‘æ¨¡å¼, å…¶å®ƒåˆ™è‡ªåŠ¨ä½œä¸ºå‘å¸ƒæ¨¡å¼ï¼š
```js
  developEnvType:{
      deploy: 'test',
      fetch: 'test'
  }
```
`deploy` æ˜¯ç¯å¢ƒçš„å‘½å, éœ€è¦æ˜¯`deployEnvType`ä¸­çš„ä¸€ä¸ªkeyå€¼ï¼›
`fetch` æ˜¯å‰ç«¯ç¯å¢ƒå˜é‡, è·‘`watch`å‘½ä»¤æ—¶ä¼šä½¿ç”¨è¿™ä¸ªå€¼, ä¸€èˆ¬ä¸Šä¸`deployEnvMapFetch`å¯¹åº”çš„ä¸€è‡´å³å¯ã€‚

è¿è¡Œ`watch`æ—¶, webpackçš„`devtool`æ˜¯`#inline-source-map`ã€‚ 
è¿è¡Œ`build`æ—¶, å‡å¦‚å‰ç«¯ç¯å¢ƒç­‰äº`developEnvType`çš„å®šä¹‰, åˆ™`devtool`ä¸º`eval`ã€‚å…¶ä»–æƒ…å†µåˆ™ä¸å£°æ˜ devtoolã€‚
å½“ç„¶å¯ä»¥é€šè¿‡`papa.config.js`çš„`webpackConfig`å¼ºåˆ¶æ”¹å†™webpacké…ç½®å±æ€§ã€‚


#### ç¼–è¯‘ä»£ç çš„è¾“å‡ºç›®å½•

ç¼–è¯‘è¾“å‡ºä½ç½®å³ä¸Šæ–‡çš„[å‰ç«¯ç¯å¢ƒ](#å‰ç«¯ç¯å¢ƒ)æåˆ°çš„`deployEnvType`ä¸­å®šä¹‰ã€‚


#### å®šä¹‰å¦‚ä½•è¯†åˆ«é¡¹ç›®

é¡¹ç›®è¯†åˆ«çš„å‚è€ƒå€¼å®šä¹‰åœ¨ `papa.config.js`, å½“ç›®å½•ä¸­å«æœ‰`projContainsOneOf`çš„å€¼, å°±è¯†åˆ«ä¸ºé¡¹ç›®, å…¶ä¸­, å‡å¦‚è¯¥ç›®å½•æ‹¥æœ‰`proj.json`, åˆ™è¯†åˆ«ä¸ºä¸€ä¸ªå¤šé¡µé¡¹ç›®, å…¶å®ƒæƒ…å†µå°±æ˜¯å•é¡µé¡¹ç›®ã€‚

å…·ä½“ä»‹ç»å¦‚ä¸‹ï¼š

å‚æ•°å | é»˜è®¤å€¼ | æè¿°
----  | --- |----
projContainsOneOf | `['m', 'pc', 'proj.json', 'config.json']` | è¾¨åˆ«ä¸€ä¸ªé¡¹ç›®æ—¶, åªè¦ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åŒ…å«æ­¤å±æ€§å®šä¹‰çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å, åˆ™è®¤å®šå®ƒä¸ºä¸€ä¸ªé¡¹ç›®ã€‚ï¼ˆæ— è®ºå•ç‹¬é¡µé¢è¿˜æ˜¯å¤šé¡µé¢ï¼‰
projScanExclude | `['modules','components', 'img', 'js']` | è·å–æ‰€æœ‰é¡¹ç›®æ—¶, æ’é™¤ä»¥ä¸‹è¿™äº›æ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹
entryInclude | `['index.js', 'index.html']` | å…¥å£æ–‡ä»¶å¤¹å¿…é¡»åŒ…å«è¿™äº›æ–‡ä»¶ã€‚ä¸€èˆ¬ä¸è¦æ›´æ”¹è¿™ä¸ªå€¼, å…¶ä¸­åŒ…å« index.js, webpackæ‰èƒ½æ­£å¸¸ç¼–è¯‘
commSingleProjSubPage | `['m', 'pc']` | å¯ä»¥å®šä¹‰é€šç”¨çš„, æ¯ä¸ªå°é¡¹ç›®å¯ä»¥é»˜è®¤åŒ…å«è¿™äº›å­é¡µé¢, å®ƒä»¬å…±äº«`config.json`, æ— éœ€æ¯ä¸ªè¿™ç§é¡µé¢éƒ½æ·»åŠ  å¤šé¡µé¡¹ç›®è¯†åˆ«æ–‡ä»¶`proj.json`ã€‚ æ¯”å¦‚ä¸€ä¸ªå•é¡µé¡¹ç›®, ä¸é€‚åˆåšå“åº”å¼, éœ€è¦åŒ…å«ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯ä¸¤ä¸ªé¡µé¢ã€‚å¯ä»¥å®šä¹‰ä¸ºç©º, åˆ™å¿½ç•¥æ‰è¿™ä¸ªæƒ…å†µã€‚å…·ä½“è¯·çœ‹é»˜è®¤çš„åˆå§‹åŒ–é¡¹ç›®ä¸­çš„æ¨¡ç‰ˆé¡¹ç›®ã€‚


### éƒ¨ç½²éwebpackçš„å…¬å…±é™æ€èµ„æº

å…¬å…±é™æ€èµ„æºå­˜æ”¾åœ¨`resource/bundle`æ–‡ä»¶å¤¹ä¸­, jsèµ„æºæ”¾åœ¨`resource/js`ã€‚

è¿è¡Œ`npm run deploy-static`éƒ¨ç½²å, ä¼šæŒ‰ç…§`config.staticFileConcatOrder`, åœ¨`js`æ–‡ä»¶å¤¹å†…æŸ¥æ‰¾åˆ°, åˆå¹¶å‹ç¼©è‡³`resource/bundle`, å¹¶æŠŠæ‰€æœ‰bundleèµ„æºåˆ†å‘åˆ°`config.deployEnvType`å®šä¹‰çš„æ‰€æœ‰æ–‡ä»¶å¤¹ã€‚ 
è¿è¡Œ`npm run watch` æ—¶, ä¼šè‡ªåŠ¨æŠŠbundleå¤åˆ¶åˆ°`config.developEnvType`å¯¹åº”çš„æ–‡ä»¶å¤¹, æ— éœ€æ‰‹åŠ¨è¿è¡Œ`npm run deploy-static`ã€‚

åˆå¹¶çš„ js èµ„æºå°†ä¼šåœ¨æ‰€æœ‰ç¼–è¯‘åçš„é¡µé¢çš„htmlä¸­æ’å…¥å¼•ç”¨ã€‚

## é¡¹ç›®é£æ ¼

### é¡¹ç›®éƒ¨ç½²é…ç½®

é€šè¿‡`papa.config.js`é…ç½®æ–‡ä»¶, å¯è‡ªå®šä¹‰å„é¡¹éƒ¨ç½²åŠŸèƒ½, æ¯”å¦‚å¯å®šä¹‰éƒ¨ç½²çš„ç¯å¢ƒ, è¾“å‡ºè·¯å¾„, è®©ç”Ÿäº§ä»£ç æ˜¯å¦å…¼å®¹ie8, æˆ–æ”¹å†™webpacké…ç½®ã€‚è¯¦è§[é¡¹ç›®é…ç½®](#é¡¹ç›®é…ç½®)

### è‡ªåŠ¨è¯†åˆ«å°é¡¹ç›®åŠé¡µé¢å…¥å£

é¿å¼€äº† webpack çš„å•é¡¹ç›®çš„ç‰¹æ€§, åªéœ€æŒ‰ç…§ç®€å•çš„çº¦å®šè§„åˆ™æ–°å»ºä¸€ä¸ªé¡µé¢ç›®å½•, å³è‡ªåŠ¨è¯†åˆ«ä¸ºä¸€ä¸ª webpack ç¼–è¯‘çš„å…¥å£ã€‚

å¦‚ä¸Šæ–‡[å®šä¹‰å¦‚ä½•è¯†åˆ«é¡¹ç›®](#å®šä¹‰å¦‚ä½•è¯†åˆ«é¡¹ç›®)æ‰€ä»‹ç», ä¸€ä¸ªç›®å½•å«æœ‰`proj.json`å°±è¯†åˆ«ä¸ºä¸€ä¸ªå¤šé¡µé¡¹ç›®, å¦åˆ™å‡å¦‚ç¬¦åˆ`projContainsOneOf`çš„èŒƒå›´çš„è¯, åˆ™è¯†åˆ«ä¸ºä¸€ä¸ªå•é¡µé¡¹ç›®ã€‚

å¤šé¡µé¡¹ç›®é‡Œ, ç¨‹åºå°†å¯»æ‰¾æ‰€æœ‰ç¬¦åˆ`entryInclude`çš„è¯†åˆ«ä¸ºé¡µé¢ï¼›å•é¡µé¡¹ç›®å‡å¦‚å«æœ‰`commSingleProjSubPage`å®šä¹‰çš„å­é¡µé¢çš„è¯, åˆ™è‡ªåŠ¨è¯†åˆ«ä¸ºæ‹¥æœ‰å­é¡µé¢, å‚è€ƒ[htmlé£æ ¼](#htmlé£æ ¼)

### htmlé£æ ¼
  æ¯ä¸ªé¡µé¢çš„htmlæ–‡ä»¶åªéœ€åŒ…å«ä¸šåŠ¡ä»£ç , ç¼–è¯‘åä¼šå°†å†…å®¹ä¼ å…¥htmlæ¨¡ç‰ˆã€‚
  æ¯ä¸ªé¡µé¢éƒ½åŒ…å«ä¸€ä¸ª`config.json`æ–‡ä»¶, ç”¨äºå®šä¹‰htmlæ¨¡ç‰ˆçš„å˜é‡, å¦‚ï¼š
  ```shell
    |-foo
    |---config.json
    |---index.js
    |---index.html
  ```
  å‡å¦‚å®šä¹‰äº†`commSingleProjSubPage`, è€Œä¸”é¡¹ç›®ä¸­å«æœ‰è¿™äº›å­é¡µé¢, åˆ™jsonæ–‡ä»¶æ”¾åœ¨å­é¡µé¢æ–‡ä»¶å¤¹çš„åŒçº§, å‡å¦‚è¯¥å€¼æ˜¯ `['m','pc']`, åˆ™å¦‚ä¸‹ï¼š
  ```shell
    |-foo
    |---config.json
    |---m
    |-----index.js
    |-----index.html
    |---pc
    |-----index.js
    |-----index.html
  ```
  é»˜è®¤çš„, ç”¨`npm run create`å‘½ä»¤åˆ›å»ºçš„æ¨¡ç‰ˆé¡¹ç›®æ˜¯ä»¥ä¸Šç¬¬äºŒä¸ªçš„ç›®å½•ç»“æ„ã€‚

  `config.json`æœ‰å¦‚ä¸‹ç¤ºä¾‹ï¼š

  å±æ€§ | é»˜è®¤å€¼ | æè¿°
  --|--|--
  title| `æ ‡é¢˜` | htmlçš„`<title/>`
  htmlFile | `index.html` | æŒ‡å®šhtmlæ–‡ä»¶çš„åå­—
  templateName_xx |  `index_xx.handlebars` | æŒ‡å®šhtmlæ¨¡ç‰ˆæ–‡ä»¶ã€‚xx æ˜¯å‡å¦‚æ­¤é¡µé¢åŒ…å« `commSingleProjSubPage`å®šä¹‰çš„å­é¡µé¢, xxå°±æ˜¯è¯¥å­é¡µé¢åå­—ã€‚
  templateName_comm | `index_comm.handlebars` | å‡å¦‚è¯¥é¡µé¢ä¸åŒ…å«`commSingleProjSubPage`çš„å­é¡µé¢, åˆ™ä½¿ç”¨è¿™ä¸ªæ¥æŒ‡å®šæ¨¡ç‰ˆ
  bodyProp | `""` | `<body/>`çš„å±æ€§ æ¯”å¦‚`"class=\"top\" data-version=\"3.0.0\""`
  moreMeta | `""` | `<head/>`å†…æ·»åŠ å†…å®¹ã€‚å¦‚`"<link rel=\"dns-prefetch\" href=\"https://www.github.com\">"`

  æ¨¡ç‰ˆæ–‡ä»¶ä½äº`resource/html`ã€‚

  å¦‚æœé¡¹ç›®ç›®å½•ä¸åŒ…å« config.json, å°†ä¸ä¼šä½¿ç”¨`htmlæ¨¡ç‰ˆ`, è€Œä¼šæŠŠç›®å½•é¡¶å±‚çš„`index.html`è§†ä¸ºå®Œæ•´çš„ html æ–‡ä»¶ï¼ˆwebpack ç¼–è¯‘å‡ºæ¥çš„èµ„æºä¼šè‡ªåŠ¨å¡«å…¥ï¼‰


### ç»„ä»¶

æ¯ä¸ªå°é¡¹ç›®äº’ç›¸ç‹¬ç«‹, ä½†å¯ä»¥å…±ç”¨æ¨¡å—ã€‚ä¸¤ç§å®ç°æ–¹å¼ï¼š

1. **å…±ç”¨ç»„ä»¶**
  
æ‰€æœ‰å°é¡¹ç›®éƒ½å¯ä»¥ require å…±ç”¨ç»„ä»¶ã€‚å› ä¸ºæ˜¯ç‹¬ç«‹ç¼–è¯‘, é¡¹ç›®ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“, ç»„ä»¶æ›´æ–°å, å„ä¸ªé¡¹ç›®éœ€é‡æ–°ç¼–è¯‘æ‰ä¼šç”Ÿæ•ˆã€‚è¿™å¯é¿å…åœ¨æ›´æ–°ç»„ä»¶å, å› é¡¹ç›®æ•°é‡åºå¤§, æ„å¤–åœ°åº”ç”¨åœ¨ä¸åº”ç”Ÿæ•ˆçš„å…¶ä»–é¡¹ç›®è€Œå¯¼è‡´æ„å¤–çš„é”™è¯¯, ä»è€Œé™ä½æ›´æ–°ä»£ç çš„è´Ÿæ‹…ã€‚

1. **å…¬å…±ä»£ç åŒ…**

æ‰€æœ‰å°é¡¹ç›®éƒ½ä¼šå¼•ç”¨å…±ä»£ç åŒ…, æ­¤åŒ…æœ‰ä¿®æ”¹, æ‰€æœ‰å·²åœ¨çº¿ä¸Šçš„é¡¹ç›®éƒ½èƒ½è·å–åˆ°æ›´æ–°çš„å…¬å…±åŒ…, æ— éœ€é‡æ–°ç¼–è¯‘ã€‚è¯¦è§[éƒ¨ç½²éwebpackçš„å…¬å…±é™æ€èµ„æº](#éƒ¨ç½²éwebpackçš„å…¬å…±é™æ€èµ„æº)


### ä¸šåŠ¡ç¯å¢ƒåˆ‡æ¢

å¯åœ¨ç¼–è¯‘æ—¶åœ¨é¡¹ç›®çš„ä¸šåŠ¡ä»£ç é‡Œè®¾ç½®ã€åˆ‡æ¢ä¸åŒçš„å†…å®¹, è®©å¼€å‘è¿‡ç¨‹æ›´ä¸ºçµæ´»ã€‚æ¯”å¦‚å¯åº”ç”¨äºéƒ¨ç½²ç¯å¢ƒçš„åˆ‡æ¢åŠfetchæ•°æ®çš„ç¯å¢ƒåˆ‡æ¢ï¼›
 

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

æœ¬åœ°å¼€å‘é‡‡ç”¨ webpack-dev-server, é»˜è®¤å¼€å¯äº†çƒ­æ›´æ–°åŠŸèƒ½, å¹¶ä¸”æ•´åˆäº†æ›´çµæ´»çš„ä»£ç†åŠŸèƒ½ã€‚

ä»£ç†åŠŸèƒ½å¯å°†æœ¬åœ°å¼€å‘æ‰“é€šå…¶ä»–é¡¹ç›®ç¯å¢ƒ, æ¯”å¦‚å¯å…±ç”¨cookieç­‰ç¼“å­˜ã€‚ å¯ä»¥æ­£åˆ™åŒ¹é…è·¯å¾„ã€‚

åœ¨ä¸€äº›åœºæ™¯ä¸­, æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®å¹¶éä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç«™ç‚¹, å®ƒè¿˜éœ€è¦ä¸å…¶ä»–é¡¹ç›®è”åŠ¨, é‚£ä¹ˆä»£ç†åŠŸèƒ½å°±éå¸¸å®ç”¨äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`papa.config.js` çš„ `proxy` è®¾ç½®ä»£ç†, å¯ä»¥é€šè¿‡æ­£åˆ™åŒ¹é…è·¯å¾„å®ç°ä»£ç†, å¹¶å¯ä»¥è®¾ç½®å¤šä¸ªåŒ¹é…è§„åˆ™ã€‚
å¦‚ä»¥ä¸‹é…ç½®, ä»£ç†äº†è·¯å¾„ä»¥é "activity" å¼€å¤´çš„æ‰€æœ‰è¯·æ±‚ åˆ°æœ¬åœ°çš„80ç«¯å£ï¼š
```js
proxy:[
      {
        filterPathname: /^\/(?!activity\/)/, 
        target: 'http://localhost:80',
      },
    ],
```

## é›†æˆåŠŸèƒ½

webpack-papa-script åŸºäºwebpack, å·²é›†æˆæ‰€æœ‰å¸¸è§èµ„æºçš„å¤„ç†, ä»¥ä¸‹æ˜¯é›†æˆåŠŸèƒ½çš„åˆ—è¡¨ï¼š
* **ES6 -> es5**
* **React**
* é›†æˆ**babel-runtime**, Promiseéšä¾¿ç”¨
* å¯å¼€å¯ie8å…¼å®¹, æŠŠä»£ç è½¬ä¸ºes3

    åœ¨`resource/html/index_pc.handlebars`æ¨¡ç‰ˆé‡Œ, åŠ äº†ie8ä»¥ä¸‹ es5-slimå’Œ sham æ–‡ä»¶çš„å¼•ç”¨, æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å®é™…åœºæ™¯æŠŠè¯¥å¼•ç”¨é“¾æ¥æ›´æ¢ã€‚
    è¯¥æ–‡ä»¶åœ¨`resource/bundle/`ä¸­å·²é¢„ç½®, æ‰§è¡Œ  
    ```shell
    npm run deploy-static
    ```
    å³å¯æŠŠes5-slim-shamæ–‡ä»¶å¤åˆ¶åˆ°éƒ¨ç½²ç›®å½•ä¸­ã€‚

* **handlebar**
* **sass-postcss-autoprofixer**
* **webpack-dev-server**    æœ¬åœ°å¼€å‘é›†æˆçƒ­æ›´æ–°åŠä»£ç†
* **extract-text-webpack-plugin**   buildæ—¶ç‹¬ç«‹å‡ºcssæ–‡ä»¶

### ç¼–è¯‘æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

* js[x]
* [s]css
* png|jpg|gif|svg
* handlebars|tmpl
* woff|woff2|eot|ttf
* pdf

### ç¼–è¯‘æ”¯æŒçš„ç‰¹æ®Šæ–‡ä»¶

* sw.js

  ä½¿ç”¨ file-loader ç¼–è¯‘, requireåå°±ä¼šæŠŠè¯¥æ–‡ä»¶ç‹¬ç«‹é‡Šå‡ºåˆ°è¾“å‡ºç›®å½•ï¼›è¾“å‡ºæ–‡ä»¶åå¸¦hashå€¼, å¯ç¡®ä¿swæ›´æ–°è¢«è§¦å‘ã€‚

* manifest.json

  åŒæ ·ä½¿ç”¨ file-loader ç¼–è¯‘, ä½†ä¸å¸¦hashå€¼, ä¾¿äºå›ºå®šå†™åœ¨htmlæ¨¡ç‰ˆã€‚

* \*.iso.(png|gif)
  
  ç»å¯¹ä¸åˆå¹¶åˆ°cssæ–‡ä»¶ã€‚å…¶ä»–çš„å°äº 4KB çš„å›¾ç‰‡å°†è½¬ä¸º base64 åˆå¹¶å…¥cssæ–‡ä»¶


ä»¥ä¸‹å†…å®¹å› æœ‰ä¸ç†æƒ³çš„æ•ˆæœ, æ‰€ä»¥æ²¡æœ‰æ”¯æŒï¼š

* å›¾ç‰‡å‹ç¼©åŠŸèƒ½

  è½¬æ¢pngæ—¶, ç°æœ‰çš„å›¾ç‰‡å‹ç¼©æ’ä»¶æ˜¯æŠŠpng24è½¬ä¸ºpng8, ä¼šå¯¼è‡´å›¾ç‰‡ä½è´¨é‡, æ‰€ä»¥åœ¨æ‰¾åˆ°æ›´å¥½çš„å‹ç¼©åŠŸèƒ½åå†æ·»åŠ è¯¥åŠŸèƒ½ã€‚

* `.html`æ–‡ä»¶å†…çš„èµ„æºå¼•ç”¨

  å¦‚index.htmlå‡å¦‚æœ‰`<img src="foo.jpg"/>`, foo.jpgæ— æ³•è§£æã€‚è¿™ç±»åŠŸèƒ½è¯·è½¬ç§»åˆ°cssã€React æˆ– handlebarså®ç°ã€‚

### eject

å‡å¦‚ webpack-papa-script æ»¡è¶³ä¸äº†é¡¹ç›®çš„éœ€è¦, éšæ—¶å¯è¿è¡Œ `create-webpack-papa eject`, æŠŠ webpack-papa-script çš„ä»£ç è½¬ç§»åˆ°é¡¹ç›®ç›®å½•ä¸Š, å¯¹æ„å»ºä»£ç è‡ªè¡Œä¿®æ”¹ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯, è¯¥æ“ä½œæ— æ³•é€†è½¬, æ“ä½œå‰è¯·ç¡®è®¤æ¸…æ¥šã€‚

## é¡¹ç›®é…ç½®
  ä»¥ä¸‹æ˜¯é»˜è®¤é…ç½®, æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®çš„ papa.config.js ä¿®æ”¹è¿™äº›å±æ€§ï¼š

```js
{
    // è‡ªåŠ¨ä¸Šä¼ ftpéœ€è¦çš„é…ç½®ä¿¡æ¯
    ftp: {
      host: '192.168.1.1',
      port: '',
      user: 'user',
      password: 'ps'
    },

    // ftpçš„æ ¹ç›®å½•
    remoteBasePath: '',
    
    // ftpçš„ç›®å½•
    remotePath: '/activity/{$target}/',

    // éœ€è¦ä¸Šä¼ åˆ°ftpçš„æ ¹ç›®å½•
    localAssetPath: 'build/activity',

    // éƒ¨ç½²ä¸Šçº¿æ—¶çš„host
    domainName: 'http://m.okpapa.com',

    // js,css,image ç­‰èµ„æºçš„host
    cdnDomain: 'https://images.okpapa.com',
    
    // ä»£ç†ä¿¡æ¯, æ•°æ®ç±»å‹: object array 
    proxy:[
      {
        filterPathname: /^\/(?!activity\/)/,  // ä»£ç† pathname ä»¥é activityå¼€å¤´çš„æ‰€æœ‰è¯·æ±‚
        target: 'http://localhost:80',
      },
    ],
    
    //æœ¬åœ°å¼€å‘ç¯å¢ƒçš„æœåŠ¡ç«¯å£
    servePort: 3005,
    
    // æœ¬åœ°å¼€å‘ç¯å¢ƒçš„é™æ€èµ„æºåŸºç›®å½•ï¼ˆåŒ devServer.contentBaseï¼‰
    serveContentBase:'./build/',
    
    // `resource/js` ä¸­çš„jsæ–‡ä»¶çš„åˆå¹¶é¡ºåº, åˆå¹¶ç”Ÿæˆè„±ç¦»webpackçš„å…¬å…±ä»£ç åŒ… 
    staticFileConcatOrder: [],

    // åˆå¹¶jsçš„å‘½å
    staticFileName:'common.js',

    // è„±ç¦»webpackçš„å…¬å…±æ–‡ä»¶çš„è¾“å‡ºå­è·¯å¾„
    staticFileSubPath:'static',

    // è¦†ç›–é¢„ç½®çš„webpacké…ç½®
    webpackConfig: {},

    // æ˜¯å¦æ”¯æŒie8
    kiss_ie8: true,

    // å®šä¹‰ä¸€ä¸ªé¡µé¢ä¸‹é¢è¿˜åˆ†å“ªäº›ç‰ˆæœ¬é¡µé¢ã€‚
    // æ¯”å¦‚ä¸€ä¸ªå•é¡µé¡¹ç›®, ä¸é€‚åˆåšå“åº”å¼, éœ€è¦åŒ…å«ç”µè„‘ç«¯å’Œç§»åŠ¨ç«¯ä¸¤ä¸ªé¡µé¢ã€‚å¯ä»¥å®šä¹‰ä¸ºç©º, åˆ™å¿½ç•¥æ‰è¿™ä¸ªæƒ…å†µ
    commSingleProjSubPage:['m', 'pc'],

    // è¾¨åˆ«ä¸€ä¸ªé¡¹ç›®æ—¶, åªè¦ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åŒ…å«ä»¥ä¸‹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹, åˆ™è®¤å®šå®ƒä¸ºä¸€ä¸ªé¡¹ç›®ã€‚ï¼ˆæ— è®ºå•ç‹¬é¡µé¢è¿˜æ˜¯å¤šé¡µé¢ï¼‰
    projContainsOneOf: ['m', 'pc', 'proj.json', 'config.json'],

    // è·å–æ‰€æœ‰é¡¹ç›®æ—¶, æ’é™¤ä»¥ä¸‹è¿™äº›æ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼ˆä¸ä¼šåœ¨å·²è¯†åˆ«ä¸ºprojçš„æ–‡ä»¶å¤¹é‡Œå†æŸ¥æ‰¾ï¼‰
    projScanExclude:['modules', 'module', 'static', 'components', 'component', 'img', 'js'],

    // éªŒè¯ webpack å…¥å£å¿…é¡»åŒ…å«è¿™ä¸ªå€¼çš„æ‰€æœ‰æ–‡ä»¶ã€‚
    entryInclude: ['index.js', 'index.html'],

    //æœ¬åœ°å¼€å‘ç¯å¢ƒçš„å‘½åå’Œå‰ç«¯ä»£ç æ³¨å…¥çš„ç¯å¢ƒå˜é‡åã€‚
    developEnvType: {
      deploy: 'test', //å‘½å
      fetch: 'test'   //ç¯å¢ƒå˜é‡å
    },
    
    //æ­£å¼ä¸Šçº¿çš„ç¯å¢ƒ
    productEnvType: {
      deploy: 'pro',
      fetch: 'produce'
    },

    //ç¯å¢ƒåç§°å¯¹åº”çš„è¾“å‡ºè·¯å¾„
    deployEnvType: {
      pre: 'dist/pre',
      pro: 'dist/pro',
      test: 'build/activity'
    },

    //ç¯å¢ƒåç§°å¯¹åº”çš„å‰ç«¯ç¯å¢ƒå˜é‡å
    deployEnvMapFetch: {
      pre: 'pre',
      pro: 'produce',
      test: 'test'
    },

    // ç¯å¢ƒåç§°çš„ä¸­æ–‡å, ç”¨äºå‘½ä»¤è¡Œçš„æ˜¾ç¤º
    releaseEnvDesc: {
      pre: 'é¢„å‘ç¯å¢ƒğŸ˜›',
      pro: 'ç”Ÿäº§ç¯å¢ƒğŸ˜',
      test: 'å¼€å‘ç¯å¢ƒğŸ¤”'
    },

    // å‰ç«¯ç¯å¢ƒçš„ä¸­æ–‡å
    fetchEnvDesc: {
      pre: 'é¢„å‘ç¯å¢ƒğŸ¥‘',
      test: 'æµ‹è¯•ç¯å¢ƒğŸ¥',
      produce: 'ç”Ÿäº§ç¯å¢ƒğŸ“'
    },
    // å‰ç«¯ä»£ç æ³¨å…¥å†…å®¹
    // mode: å‰ç«¯ç¯å¢ƒå˜é‡
    // debug: ç¯å¢ƒä¸productEnvTypeä¸€è‡´æ—¶, åˆ™ä¸ºfalse, å¦åˆ™true
    frontendConfCode:`try{
      Object.assign(window.publicConfig, {
        mode:"{$mode}",
        debug:{$debug}
      });
    }catch(e){}`,
  },
```

